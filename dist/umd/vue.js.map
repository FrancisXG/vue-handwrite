{"version":3,"file":"vue.js","sources":["../../src/observer/index.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["class Observer {\n  constructor(value) {\n    this.walk(value)\n  }\n  walk(data) {\n    let keys = Object.keys(data)\n    keys.forEach(key => {\n      defineReactive(data, key, data[key])\n    })\n  }\n\n}\nfunction defineReactive(data, key, value) {\n  // defineProperty(obj,prop,{})\n  observe(value)\n  Object.defineProperty(data, key, {\n    get() {\n      console.log(\"访问\")\n      return value\n    },\n    set(newVal) {\n      console.log(\"修改\")\n      if (newVal == value) return\n      observe(newVal)\n      value = newVal\n    }\n\n  })\n}\n\nexport function observe(data) {\n  if (typeof data !== 'object' || data == null) return\n  return new Observer(data)\n}\n\n","import { observe } from \"./observer/index\"\n\nexport function initState(vm) {\n  // vm.$options\n  const opts = vm.$options\n  if (opts.props) {\n    initProps(vm)\n  }\n  if (opts.methods) {\n    initMethods(vm)\n  }\n  if (opts.data) {\n    initData(vm)\n  }\n  if (opts.computed) {\n    initComputed(vm)\n  }\n  if (opts.watch) {\n    initWatch(vm)\n  }\n\n}\n\nfunction initProps() { }\nfunction initMethods() { }\nfunction initData(vm) {\n  let data = vm.$options.data\n  vm._data = data = typeof data === 'function' ? data.call(vm) : data\n  // 数据的劫持方案，对象object.defineProperty\n  // 数组 单独处理的\n  observe(data)\n\n\n}\nfunction initComputed() { }\nfunction initWatch() { }\n","import { initState } from \"./state\"\n\nexport function initMixin(Vue){\n  Vue.prototype._init = function(options){\n    const vm = this\n    vm.$options = options\n\n    /* \n    vue组件中有很多状态，data props watch computed    \n    */\n    \n    // 初始化状态（将数据做一个初始化的劫持，当我改变数据时应该更新视图）\n    initState(vm)\n    // vue里面核心特性，响应式数据原理\n    // vue 是一个什么样的框架 MVVM\n    /* \n    数据变化视图会更新，视图变化数据会被影响\n    MVVM不能跳过数据去更新视图\n    $ref 直接操作DOM\n\n\n    \n    */\n  }\n}","import { initMixin } from \"./init\"\n\n// ES6 类写法\nfunction Vue(options){\n  this._init(options)\n}\n\n// 写成一个个的插件进行对原型的扩展\ninitMixin(Vue)\n// 初始化方法\n\nexport default Vue"],"names":["Observer","value","walk","data","keys","Object","forEach","key","defineReactive","observe","defineProperty","get","console","log","set","newVal","initState","vm","opts","$options","props","methods","initData","computed","watch","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAAMA;EACJ,oBAAYC,KAAZ,EAAmB;EAAA;;EACjB,SAAKC,IAAL,CAAUD,KAAV;EACD;;;;aACD,cAAKE,IAAL,EAAW;EACT,UAAIC,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYD,IAAZ,CAAX;EACAC,MAAAA,IAAI,CAACE,OAAL,CAAa,UAAAC,GAAG,EAAI;EAClBC,QAAAA,cAAc,CAACL,IAAD,EAAOI,GAAP,EAAYJ,IAAI,CAACI,GAAD,CAAhB,CAAd;EACD,OAFD;EAGD;;;;;;EAGH,SAASC,cAAT,CAAwBL,IAAxB,EAA8BI,GAA9B,EAAmCN,KAAnC,EAA0C;EACxC;EACAQ,EAAAA,OAAO,CAACR,KAAD,CAAP;EACAI,EAAAA,MAAM,CAACK,cAAP,CAAsBP,IAAtB,EAA4BI,GAA5B,EAAiC;EAC/BI,IAAAA,GAD+B,iBACzB;EACJC,MAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;EACA,aAAOZ,KAAP;EACD,KAJ8B;EAK/Ba,IAAAA,GAL+B,eAK3BC,MAL2B,EAKnB;EACVH,MAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;EACA,UAAIE,MAAM,IAAId,KAAd,EAAqB;EACrBQ,MAAAA,OAAO,CAACM,MAAD,CAAP;EACAd,MAAAA,KAAK,GAAGc,MAAR;EACD;EAV8B,GAAjC;EAaD;;EAEM,SAASN,OAAT,CAAiBN,IAAjB,EAAuB;EAC5B,MAAI,QAAOA,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,IAAI,IAAxC,EAA8C;EAC9C,SAAO,IAAIH,QAAJ,CAAaG,IAAb,CAAP;EACD;;EC/BM,SAASa,SAAT,CAAmBC,EAAnB,EAAuB;EAC5B;EACA,MAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB;;EACA,MAAID,IAAI,CAACE,KAAT,EAAgB;;EAGhB,MAAIF,IAAI,CAACG,OAAT,EAAkB;;EAGlB,MAAIH,IAAI,CAACf,IAAT,EAAe;EACbmB,IAAAA,QAAQ,CAACL,EAAD,CAAR;EACD;;EACD,MAAIC,IAAI,CAACK,QAAT,EAAmB;;EAGnB,MAAIL,IAAI,CAACM,KAAT,EAAgB;EAIjB;;EAID,SAASF,QAAT,CAAkBL,EAAlB,EAAsB;EACpB,MAAId,IAAI,GAAGc,EAAE,CAACE,QAAH,CAAYhB,IAAvB;EACAc,EAAAA,EAAE,CAACQ,KAAH,GAAWtB,IAAI,GAAG,OAAOA,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACuB,IAAL,CAAUT,EAAV,CAA7B,GAA6Cd,IAA/D,CAFoB;EAIpB;;EACAM,EAAAA,OAAO,CAACN,IAAD,CAAP;EAGD;;EC/BM,SAASwB,SAAT,CAAmBC,GAAnB,EAAuB;EAC5BA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAASC,OAAT,EAAiB;EACrC,QAAMd,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcY,OAAd;EAEA;EACJ;EACA;EAEI;;EACAf,IAAAA,SAAS,CAACC,EAAD,CAAT,CATqC;EAWrC;;EACA;EACJ;EACA;EACA;EACA;EACA;EAGG,GApBD;EAqBD;;ECrBD,SAASW,GAAT,CAAaG,OAAb,EAAqB;EACnB,OAAKD,KAAL,CAAWC,OAAX;EACD;;;EAGDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}